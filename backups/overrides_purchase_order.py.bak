"""
Backup of `premierprint/overrides/purchase_order.py` before removal.
"""
import frappe
from erpnext.buying.doctype.purchase_order.purchase_order import PurchaseOrder
from premierprint.utils.naming_helper import get_category_from_series, get_item_codes, get_next_id, build_name_with_items


class CustomPurchaseOrder(PurchaseOrder):
    def autoname(self):
        """Format: Ð po0000001/23/45/67"""
        category_code = get_category_from_series(self.naming_series, "po")
        next_id = get_next_id("Purchase Order", category_code)
        base_name = f"{category_code}{next_id}"
        item_codes = get_item_codes(self)
        self.name = build_name_with_items(base_name, item_codes)
